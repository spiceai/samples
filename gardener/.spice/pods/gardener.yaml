name: gardener
params:
  epoch_time: 1612557000
  granularity: 10m
  interval: 1h
  period: 100d
dataspaces:
  - from: sensors
    name: garden
    fields:
      - name: temperature
      - name: moisture
    data:
      connector:
        name: file
        params:
          path: data/garden_data.csv
      processor:
        name: csv

actions:
  - name: close_valve
  - name: open_valve_half
  - name: open_valve_full

training:
  rewards:
    - reward: close_valve
      with: |
        # Reward keeping moisture content above 25%
        if new_state.sensors_garden_moisture > 0.25:
          reward = 100
        else:
          reward = -10

    - reward: open_valve_half
      with: |
        # Reward watering when needed, but penalize wasting water
        if new_state.sensors_garden_moisture < 0.25:
          reward = 10
        else:
          reward = -25

    - reward: open_valve_full
      with: |
        # Reward watering when needed, but penalize wasting even more water
        if new_state.sensors_garden_moisture < 0.25:
          reward = 10
        else:
          reward = -50
